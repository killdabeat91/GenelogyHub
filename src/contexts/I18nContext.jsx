import React, { createContext, useContext, useState } from 'react';

const translations = {
    vi: {
        // Sidebar
        'nav.overview': 'Tổng quan',
        'nav.tree': 'Sơ đồ dòng họ',
        'nav.members': 'Thành viên',
        'nav.events': 'Sự kiện & Ngày giỗ',
        'nav.fund': 'Quỹ dòng họ',
        'nav.library': 'Thư viện kỷ vật',
        'nav.map': 'Phân bổ nhánh',
        'nav.audit': 'Lịch sử thao tác',
        'nav.settings': 'Cài đặt',
        'nav.management': 'Quản lý',
        'nav.system': 'Hệ thống',
        // Header
        'header.search': 'Tìm kiếm...',
        'brand': 'Gia Phả',
        // Dashboard
        'dash.totalMembers': 'Tổng thành viên',
        'dash.generations': 'Số thế hệ',
        'dash.alive': 'Còn sống',
        'dash.deceased': 'Đã mất',
        'dash.upcoming': 'Sự kiện sắp tới',
        'dash.recent': 'Hoạt động gần đây',
        'dash.branchDist': 'Phân bổ theo nhánh',
        'dash.quickStats': 'Thống kê nhanh',
        'dash.overview': 'Tổng quan gia phả',
        'dash.thisMonth': 'tháng này',
        // Members
        'members.all': 'Tất cả',
        'members.alive': 'Còn sống',
        'members.deceased': 'Đã mất',
        'members.add': '+ Thêm',
        'members.searchName': 'Tìm theo tên...',
        'members.showing': 'Hiển thị',
        'members.of': '/',
        'members.listTitle': 'Danh sách thành viên',
        'members.notFound': 'Không tìm thấy thành viên nào.',
        'members.addTitle': 'Thêm Thành Viên',
        // Events
        'events.deathAnn': 'Ngày giỗ sắp tới',
        'events.birthday': 'Sinh nhật',
        'events.gatherings': 'Sự kiện & Hội họp',
        'events.daysLeft': 'ngày nữa',
        'events.add': '+ Thêm sự kiện',
        // Fund
        'fund.balance': 'Tồn Quỹ',
        'fund.totalIncome': 'Tổng Thu',
        'fund.totalExpense': 'Tổng Chi',
        'fund.all': 'Tất cả',
        'fund.income': 'Thu',
        'fund.expense': 'Chi',
        'fund.record': '+ Ghi nhận',
        'fund.history': 'Lịch sử giao dịch',
        // Library
        'lib.photos': 'Ảnh',
        'lib.documents': 'Tài liệu',
        'lib.upload': '+ Tải lên',
        'lib.albums': 'Album ảnh',
        'lib.files': 'tệp',
        // General
        'save': 'Lưu',
        'cancel': 'Hủy',
        'edit': 'Sửa',
        'delete': 'Xóa',
        'close': 'Đóng',
        'people': 'người',
        'days': 'ngày',
        'admin': 'Quản trị viên',
        // Settings
        'settings.darkMode': 'Chế độ tối',
        'settings.language': 'Ngôn ngữ',
        'settings.exportPdf': 'Xuất PDF Gia phả',
        'settings.appearance': 'Giao diện',
        'settings.general': 'Tổng quát',
        'settings.data': 'Dữ liệu',
        'settings.about': 'Về ứng dụng',
        'settings.version': 'Phiên bản',
        'settings.exportMembers': 'Xuất danh sách thành viên',
        'settings.exportTree': 'Xuất sơ đồ gia phả',
        // Profile
        'profile.bio': 'Tiểu sử',
        'profile.info': 'Thông tin cá nhân',
        'profile.family': 'Gia đình',
        'profile.comments': 'Ghi chú & Bình luận',
        'profile.addComment': 'Thêm ghi chú...',
        'profile.post': 'Đăng',
        // Notifications
        'notif.title': 'Thông báo',
        'notif.markRead': 'Đánh dấu đã đọc',
        // Search
        'search.advanced': 'Tìm kiếm nâng cao',
        'search.name': 'Họ tên',
        'search.gen': 'Đời thứ',
        'search.branch': 'Chi/Nhánh',
        'search.hometown': 'Quê quán',
        'search.job': 'Nghề nghiệp',
        'search.btn': 'Tìm kiếm',
        'search.results': 'Kết quả',
        // Login
        'login.title': 'Đăng nhập Hệ thống Gia Phả',
        'login.username': 'Tên đăng nhập',
        'login.password': 'Mật khẩu',
        'login.btn': 'Đăng nhập',
        'login.remember': 'Ghi nhớ đăng nhập',
        'login.forgot': 'Quên mật khẩu?',
    },
    en: {
        'nav.overview': 'Dashboard',
        'nav.tree': 'Family Tree',
        'nav.members': 'Members',
        'nav.events': 'Events & Anniversaries',
        'nav.fund': 'Family Fund',
        'nav.library': 'Heritage Library',
        'nav.map': 'Branch Distribution',
        'nav.audit': 'Activity Log',
        'nav.settings': 'Settings',
        'nav.management': 'Management',
        'nav.system': 'System',
        'header.search': 'Search...',
        'brand': 'Genealogy',
        'dash.totalMembers': 'Total Members',
        'dash.generations': 'Generations',
        'dash.alive': 'Living',
        'dash.deceased': 'Deceased',
        'dash.upcoming': 'Upcoming Events',
        'dash.recent': 'Recent Activity',
        'dash.branchDist': 'Branch Distribution',
        'dash.quickStats': 'Quick Stats',
        'dash.overview': 'Genealogy Overview',
        'dash.thisMonth': 'this month',
        'members.all': 'All',
        'members.alive': 'Living',
        'members.deceased': 'Deceased',
        'members.add': '+ Add',
        'members.searchName': 'Search by name...',
        'members.showing': 'Showing',
        'members.of': '/',
        'members.listTitle': 'Member List',
        'members.notFound': 'No members found.',
        'members.addTitle': 'Add Member',
        'events.deathAnn': 'Upcoming Anniversaries',
        'events.birthday': 'Birthdays',
        'events.gatherings': 'Events & Gatherings',
        'events.daysLeft': 'days left',
        'events.add': '+ Add Event',
        'fund.balance': 'Balance',
        'fund.totalIncome': 'Total Income',
        'fund.totalExpense': 'Total Expense',
        'fund.all': 'All',
        'fund.income': 'Income',
        'fund.expense': 'Expense',
        'fund.record': '+ Record',
        'fund.history': 'Transaction History',
        'lib.photos': 'Photos',
        'lib.documents': 'Documents',
        'lib.upload': '+ Upload',
        'lib.albums': 'Photo Albums',
        'lib.files': 'files',
        'save': 'Save',
        'cancel': 'Cancel',
        'edit': 'Edit',
        'delete': 'Delete',
        'close': 'Close',
        'people': 'people',
        'days': 'days',
        'admin': 'Administrator',
        'settings.darkMode': 'Dark Mode',
        'settings.language': 'Language',
        'settings.exportPdf': 'Export Genealogy PDF',
        'settings.appearance': 'Appearance',
        'settings.general': 'General',
        'settings.data': 'Data',
        'settings.about': 'About',
        'settings.version': 'Version',
        'settings.exportMembers': 'Export Member List',
        'settings.exportTree': 'Export Family Tree',
        'profile.bio': 'Biography',
        'profile.info': 'Personal Info',
        'profile.family': 'Family',
        'profile.comments': 'Notes & Comments',
        'profile.addComment': 'Add a note...',
        'profile.post': 'Post',
        'notif.title': 'Notifications',
        'notif.markRead': 'Mark as read',
        'search.advanced': 'Advanced Search',
        'search.name': 'Full Name',
        'search.gen': 'Generation',
        'search.branch': 'Branch',
        'search.hometown': 'Hometown',
        'search.job': 'Occupation',
        'search.btn': 'Search',
        'search.results': 'Results',
        'login.title': 'Genealogy System Login',
        'login.username': 'Username',
        'login.password': 'Password',
        'login.btn': 'Sign In',
        'login.remember': 'Remember me',
        'login.forgot': 'Forgot password?',
    }
};

const I18nContext = createContext();

export function I18nProvider({ children }) {
    const [lang, setLang] = useState(() => localStorage.getItem('gia-pha-lang') || 'vi');

    const t = (key) => translations[lang]?.[key] || translations['vi']?.[key] || key;

    const switchLang = (newLang) => {
        setLang(newLang);
        localStorage.setItem('gia-pha-lang', newLang);
    };

    return (
        <I18nContext.Provider value={{ lang, t, switchLang }}>
            {children}
        </I18nContext.Provider>
    );
}

export function useI18n() {
    return useContext(I18nContext);
}
